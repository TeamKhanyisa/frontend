{"ast":null,"code":"// 쿠키 기반 API 통신 유틸리티\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api';\n\n/**\n * 쿠키를 포함한 fetch 요청을 보내는 함수\n * @param {string} endpoint - API 엔드포인트\n * @param {object} options - fetch 옵션\n * @returns {Promise} - API 응답\n */\nconst apiRequest = async (endpoint, options = {}) => {\n  const defaultOptions = {\n    credentials: 'include',\n    // 쿠키를 자동으로 포함\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers\n    }\n  };\n\n  // FormData인 경우 Content-Type 제거 (자동 설정됨)\n  if (options.body instanceof FormData) {\n    delete defaultOptions.headers['Content-Type'];\n  }\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n    ...defaultOptions,\n    ...options\n  });\n\n  // 401 Unauthorized인 경우 로그인 페이지로 리다이렉트\n  if (response.status === 401) {\n    window.location.href = '/';\n    throw new Error('Unauthorized');\n  }\n\n  // 에러 처리\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({\n      message: 'Unknown error'\n    }));\n    throw new Error(error.message || `HTTP error! status: ${response.status}`);\n  }\n  return response.json();\n};\n\n// 상품 API\nexport const productAPI = {\n  // 상품 목록 조회\n  getProducts: async (params = {}) => {\n    const queryString = new URLSearchParams(params).toString();\n    return apiRequest(`/products${queryString ? `?${queryString}` : ''}`);\n  },\n  // 상품 상세 조회\n  getProduct: async id => {\n    return apiRequest(`/products/${id}`);\n  },\n  // 상품 등록\n  createProduct: async productData => {\n    return apiRequest('/products', {\n      method: 'POST',\n      body: productData // FormData\n    });\n  },\n  // 상품 수정\n  updateProduct: async (id, productData) => {\n    return apiRequest(`/products/${id}`, {\n      method: 'PUT',\n      body: productData // FormData\n    });\n  },\n  // 상품 삭제\n  deleteProduct: async id => {\n    return apiRequest(`/products/${id}`, {\n      method: 'DELETE'\n    });\n  },\n  // 상품 일괄 삭제\n  bulkDeleteProducts: async ids => {\n    return apiRequest('/products/bulk-delete', {\n      method: 'DELETE',\n      body: JSON.stringify({\n        ids\n      })\n    });\n  }\n};\n\n// 인증 API\nexport const authAPI = {\n  // 로그인\n  login: async (email, password) => {\n    return apiRequest('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    });\n  },\n  // 로그아웃\n  logout: async () => {\n    return apiRequest('/auth/logout', {\n      method: 'POST'\n    });\n  },\n  // 현재 사용자 정보 조회\n  getCurrentUser: async () => {\n    return apiRequest('/auth/me');\n  },\n  // 회원가입\n  signup: async userData => {\n    return apiRequest('/auth/signup', {\n      method: 'POST',\n      body: JSON.stringify(userData)\n    });\n  }\n};\n\n// 출입 요청 API\nexport const accessRequestAPI = {\n  // 출입 요청 목록 조회\n  getRequests: async () => {\n    return apiRequest('/access-requests');\n  },\n  // 출입 승인\n  approveRequest: async id => {\n    return apiRequest(`/access-requests/${id}/approve`, {\n      method: 'POST'\n    });\n  },\n  // 출입 거부\n  rejectRequest: async id => {\n    return apiRequest(`/access-requests/${id}/reject`, {\n      method: 'POST'\n    });\n  },\n  // 출입 요청 생성\n  createRequest: async type => {\n    return apiRequest('/access-requests', {\n      method: 'POST',\n      body: JSON.stringify({\n        type\n      })\n    });\n  }\n};\n\n// 문 제어 API\nexport const doorControlAPI = {\n  // 문 열기\n  openDoor: async () => {\n    return apiRequest('/door/open', {\n      method: 'POST'\n    });\n  },\n  // 문 닫기\n  closeDoor: async () => {\n    return apiRequest('/door/close', {\n      method: 'POST'\n    });\n  },\n  // 긴급 모드 활성화\n  activateEmergencyMode: async () => {\n    return apiRequest('/door/emergency-mode', {\n      method: 'POST'\n    });\n  }\n};\nexport default apiRequest;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","apiRequest","endpoint","options","defaultOptions","credentials","headers","body","FormData","response","fetch","status","window","location","href","Error","ok","error","json","catch","message","productAPI","getProducts","params","queryString","URLSearchParams","toString","getProduct","id","createProduct","productData","method","updateProduct","deleteProduct","bulkDeleteProducts","ids","JSON","stringify","authAPI","login","email","password","logout","getCurrentUser","signup","userData","accessRequestAPI","getRequests","approveRequest","rejectRequest","createRequest","type","doorControlAPI","openDoor","closeDoor","activateEmergencyMode"],"sources":["/Users/chan/Develope/FACT_DESIGN/REACT/src/utils/api.js"],"sourcesContent":["// 쿠키 기반 API 통신 유틸리티\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api';\n\n/**\n * 쿠키를 포함한 fetch 요청을 보내는 함수\n * @param {string} endpoint - API 엔드포인트\n * @param {object} options - fetch 옵션\n * @returns {Promise} - API 응답\n */\nconst apiRequest = async (endpoint, options = {}) => {\n  const defaultOptions = {\n    credentials: 'include', // 쿠키를 자동으로 포함\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers,\n    },\n  };\n\n  // FormData인 경우 Content-Type 제거 (자동 설정됨)\n  if (options.body instanceof FormData) {\n    delete defaultOptions.headers['Content-Type'];\n  }\n\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n    ...defaultOptions,\n    ...options,\n  });\n\n  // 401 Unauthorized인 경우 로그인 페이지로 리다이렉트\n  if (response.status === 401) {\n    window.location.href = '/';\n    throw new Error('Unauthorized');\n  }\n\n  // 에러 처리\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({ message: 'Unknown error' }));\n    throw new Error(error.message || `HTTP error! status: ${response.status}`);\n  }\n\n  return response.json();\n};\n\n// 상품 API\nexport const productAPI = {\n  // 상품 목록 조회\n  getProducts: async (params = {}) => {\n    const queryString = new URLSearchParams(params).toString();\n    return apiRequest(`/products${queryString ? `?${queryString}` : ''}`);\n  },\n\n  // 상품 상세 조회\n  getProduct: async (id) => {\n    return apiRequest(`/products/${id}`);\n  },\n\n  // 상품 등록\n  createProduct: async (productData) => {\n    return apiRequest('/products', {\n      method: 'POST',\n      body: productData, // FormData\n    });\n  },\n\n  // 상품 수정\n  updateProduct: async (id, productData) => {\n    return apiRequest(`/products/${id}`, {\n      method: 'PUT',\n      body: productData, // FormData\n    });\n  },\n\n  // 상품 삭제\n  deleteProduct: async (id) => {\n    return apiRequest(`/products/${id}`, {\n      method: 'DELETE',\n    });\n  },\n\n  // 상품 일괄 삭제\n  bulkDeleteProducts: async (ids) => {\n    return apiRequest('/products/bulk-delete', {\n      method: 'DELETE',\n      body: JSON.stringify({ ids }),\n    });\n  },\n};\n\n// 인증 API\nexport const authAPI = {\n  // 로그인\n  login: async (email, password) => {\n    return apiRequest('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({ email, password }),\n    });\n  },\n\n  // 로그아웃\n  logout: async () => {\n    return apiRequest('/auth/logout', {\n      method: 'POST',\n    });\n  },\n\n  // 현재 사용자 정보 조회\n  getCurrentUser: async () => {\n    return apiRequest('/auth/me');\n  },\n\n  // 회원가입\n  signup: async (userData) => {\n    return apiRequest('/auth/signup', {\n      method: 'POST',\n      body: JSON.stringify(userData),\n    });\n  },\n};\n\n// 출입 요청 API\nexport const accessRequestAPI = {\n  // 출입 요청 목록 조회\n  getRequests: async () => {\n    return apiRequest('/access-requests');\n  },\n\n  // 출입 승인\n  approveRequest: async (id) => {\n    return apiRequest(`/access-requests/${id}/approve`, {\n      method: 'POST',\n    });\n  },\n\n  // 출입 거부\n  rejectRequest: async (id) => {\n    return apiRequest(`/access-requests/${id}/reject`, {\n      method: 'POST',\n    });\n  },\n\n  // 출입 요청 생성\n  createRequest: async (type) => {\n    return apiRequest('/access-requests', {\n      method: 'POST',\n      body: JSON.stringify({ type }),\n    });\n  },\n};\n\n// 문 제어 API\nexport const doorControlAPI = {\n  // 문 열기\n  openDoor: async () => {\n    return apiRequest('/door/open', {\n      method: 'POST',\n    });\n  },\n\n  // 문 닫기\n  closeDoor: async () => {\n    return apiRequest('/door/close', {\n      method: 'POST',\n    });\n  },\n\n  // 긴급 모드 활성화\n  activateEmergencyMode: async () => {\n    return apiRequest('/door/emergency-mode', {\n      method: 'POST',\n    });\n  },\n};\n\nexport default apiRequest;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}