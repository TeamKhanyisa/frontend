{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\n\n/**\n * 웹 알림 기능을 제공하는 커스텀 훅\n * @returns {Object} 알림 권한 상태 및 알림 발송 함수\n */\nexport const useNotification = () => {\n  _s();\n  const [permission, setPermission] = useState('default');\n  const [isSupported, setIsSupported] = useState(false);\n  useEffect(() => {\n    // 브라우저가 알림을 지원하는지 확인\n    if ('Notification' in window) {\n      setIsSupported(true);\n      setPermission(Notification.permission);\n    }\n  }, []);\n\n  /**\n   * 알림 권한 요청\n   * @returns {Promise<boolean>} 권한 허용 여부\n   */\n  const requestPermission = async () => {\n    if (!isSupported) {\n      console.warn('이 브라우저는 알림을 지원하지 않습니다.');\n      return false;\n    }\n    if (Notification.permission === 'granted') {\n      setPermission('granted');\n      return true;\n    }\n    if (Notification.permission === 'denied') {\n      console.warn('알림 권한이 거부되었습니다. 브라우저 설정에서 변경해주세요.');\n      setPermission('denied');\n      return false;\n    }\n    try {\n      const result = await Notification.requestPermission();\n      setPermission(result);\n      return result === 'granted';\n    } catch (error) {\n      console.error('알림 권한 요청 중 오류:', error);\n      return false;\n    }\n  };\n\n  /**\n   * 알림 발송\n   * @param {string} title - 알림 제목\n   * @param {Object} options - 알림 옵션 (body, icon, badge, tag 등)\n   * @returns {Notification|null} 생성된 알림 객체 또는 null\n   */\n  const showNotification = (title, options = {}) => {\n    if (!isSupported) {\n      console.warn('이 브라우저는 알림을 지원하지 않습니다.');\n      return null;\n    }\n    if (Notification.permission !== 'granted') {\n      console.warn('알림 권한이 없습니다. requestPermission()을 먼저 호출하세요.');\n      return null;\n    }\n    const defaultOptions = {\n      body: '',\n      icon: '/images/placeholder.svg',\n      // 기본 아이콘\n      badge: '/images/placeholder.svg',\n      tag: 'default',\n      // 같은 tag를 가진 알림은 덮어씀\n      requireInteraction: false,\n      // 사용자가 클릭하지 않아도 자동으로 사라짐\n      silent: false,\n      ...options\n    };\n    try {\n      const notification = new Notification(title, defaultOptions);\n\n      // 알림 클릭 시 포커스\n      notification.onclick = event => {\n        event.preventDefault();\n        window.focus();\n        if (options.onClick) {\n          options.onClick(event);\n        }\n        notification.close();\n      };\n\n      // 알림이 자동으로 닫히는 시간 설정 (기본 5초)\n      const autoCloseTime = options.autoClose || 5000;\n      if (autoCloseTime > 0) {\n        setTimeout(() => {\n          notification.close();\n        }, autoCloseTime);\n      }\n      return notification;\n    } catch (error) {\n      console.error('알림 발송 중 오류:', error);\n      return null;\n    }\n  };\n  return {\n    isSupported,\n    permission,\n    requestPermission,\n    showNotification\n  };\n};\n_s(useNotification, \"1UFp7Cly0kl2M5tN637aezEFzDk=\");","map":{"version":3,"names":["useState","useEffect","useNotification","_s","permission","setPermission","isSupported","setIsSupported","window","Notification","requestPermission","console","warn","result","error","showNotification","title","options","defaultOptions","body","icon","badge","tag","requireInteraction","silent","notification","onclick","event","preventDefault","focus","onClick","close","autoCloseTime","autoClose","setTimeout"],"sources":["/Users/parkchanyu/Developer/2학기캡스톤/FACT_Front/frontend/src/hooks/useNotification.js"],"sourcesContent":["import { useState, useEffect } from 'react';\n\n/**\n * 웹 알림 기능을 제공하는 커스텀 훅\n * @returns {Object} 알림 권한 상태 및 알림 발송 함수\n */\nexport const useNotification = () => {\n  const [permission, setPermission] = useState('default');\n  const [isSupported, setIsSupported] = useState(false);\n\n  useEffect(() => {\n    // 브라우저가 알림을 지원하는지 확인\n    if ('Notification' in window) {\n      setIsSupported(true);\n      setPermission(Notification.permission);\n    }\n  }, []);\n\n  /**\n   * 알림 권한 요청\n   * @returns {Promise<boolean>} 권한 허용 여부\n   */\n  const requestPermission = async () => {\n    if (!isSupported) {\n      console.warn('이 브라우저는 알림을 지원하지 않습니다.');\n      return false;\n    }\n\n    if (Notification.permission === 'granted') {\n      setPermission('granted');\n      return true;\n    }\n\n    if (Notification.permission === 'denied') {\n      console.warn('알림 권한이 거부되었습니다. 브라우저 설정에서 변경해주세요.');\n      setPermission('denied');\n      return false;\n    }\n\n    try {\n      const result = await Notification.requestPermission();\n      setPermission(result);\n      return result === 'granted';\n    } catch (error) {\n      console.error('알림 권한 요청 중 오류:', error);\n      return false;\n    }\n  };\n\n  /**\n   * 알림 발송\n   * @param {string} title - 알림 제목\n   * @param {Object} options - 알림 옵션 (body, icon, badge, tag 등)\n   * @returns {Notification|null} 생성된 알림 객체 또는 null\n   */\n  const showNotification = (title, options = {}) => {\n    if (!isSupported) {\n      console.warn('이 브라우저는 알림을 지원하지 않습니다.');\n      return null;\n    }\n\n    if (Notification.permission !== 'granted') {\n      console.warn('알림 권한이 없습니다. requestPermission()을 먼저 호출하세요.');\n      return null;\n    }\n\n    const defaultOptions = {\n      body: '',\n      icon: '/images/placeholder.svg', // 기본 아이콘\n      badge: '/images/placeholder.svg',\n      tag: 'default', // 같은 tag를 가진 알림은 덮어씀\n      requireInteraction: false, // 사용자가 클릭하지 않아도 자동으로 사라짐\n      silent: false,\n      ...options,\n    };\n\n    try {\n      const notification = new Notification(title, defaultOptions);\n\n      // 알림 클릭 시 포커스\n      notification.onclick = (event) => {\n        event.preventDefault();\n        window.focus();\n        if (options.onClick) {\n          options.onClick(event);\n        }\n        notification.close();\n      };\n\n      // 알림이 자동으로 닫히는 시간 설정 (기본 5초)\n      const autoCloseTime = options.autoClose || 5000;\n      if (autoCloseTime > 0) {\n        setTimeout(() => {\n          notification.close();\n        }, autoCloseTime);\n      }\n\n      return notification;\n    } catch (error) {\n      console.error('알림 발송 중 오류:', error);\n      return null;\n    }\n  };\n\n  return {\n    isSupported,\n    permission,\n    requestPermission,\n    showNotification,\n  };\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}